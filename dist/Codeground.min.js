"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),Codeground=function(){function t(e){_classCallCheck(this,t),this.tabs=this.tabs.bind(this),this.render=this.render.bind(this),this.options={html:e.html!==!1,css:e.css!==!1,js:e.js!==!1,height:e.height||500,width:e.width||"100%",layout:e.layout||"half",initialFull:e.initialFull||"output",style:e.style||"tabs",initialTab:e.initialTab||"css",fullscreen:e.fullscreen||!1,topbar:"tabs"===e.style||e.topbar!==!1,title:e.title||"Codeground"}}return _createClass(t,[{key:"initCodeground",value:function(t){var e=this;t?this.codeground=document.getElementById(t):this.codeground=document.getElementById("codeground"),this.codeground.className="codeground",this.options.topbar&&this.createTopBar(this.options.title),this.editorsDiv=document.createElement("div"),this.editorsDiv.className+="editors half",this.codeground.appendChild(this.editorsDiv),this.outputDiv=document.createElement("div"),this.outputDiv.className+="output half",this.codeground.appendChild(this.outputDiv);var i=this.topBar.style.height.slice(0,-2);this.editorHeight=this.options.height-i,"half"===this.options.layout?this.halfWidth():"full"===this.options.layout&&this.fullWidth(this.options.initialFull),this.createEditor("html",this.editorsDiv),this.htmlEditor=document.querySelector("#html"),this.htmlEditorCode=document.querySelector("#html textarea"),this.createEditor("css",this.editorsDiv),this.cssEditor=document.querySelector("#css"),this.cssEditorCode=document.querySelector("#css textarea"),this.createEditor("js",this.editorsDiv),this.jsEditor=document.querySelector("#js"),this.jsEditorCode=document.querySelector("#js textarea"),this.keyupRender(this.htmlEditorCode),this.keyupRender(this.cssEditorCode),this.keyupRender(this.jsEditorCode);var s=document.createElement("iframe");if(this.outputDiv.appendChild(s),this.options.html||(document.querySelector("#html").style.display="none"),this.options.css||(document.querySelector("#css").style.display="none"),this.options.js||(document.querySelector("#js").style.display="none"),"tabs"===this.options.style){if(this.options.html){this.createTabBtn("HTML");var o=document.getElementById("htmlBtn");o.addEventListener("click",function(){return e.tabs("html")})}if(this.options.css){this.createTabBtn("CSS");var l=document.getElementById("cssBtn");l.addEventListener("click",function(){return e.tabs("css")})}if(this.options.js){this.createTabBtn("JS");var n=document.getElementById("jsBtn");n.addEventListener("click",function(){return e.tabs("js")})}this.createTabBtn("Result");var h=document.getElementById("resultBtn");h.addEventListener("click",function(){return e.tabs("result")}),this.tabs(this.options.initialTab)}else this.htmlEditor.style.height="33%",this.cssEditor.style.height="33%",this.jsEditor.style.height="33%";if(this.options.fullscreen){this.codeground.style.border="none",this.codeground.style.height="100%",this.topBar.style.height="5%",this.editorsDiv.style.height="94%",this.outputDiv.style.height="94%";var d=document.querySelectorAll("textarea");d.forEach(function(t){return t.style.height="100%"})}}},{key:"preset",value:function(t,e,i){t&&(this.htmlEditorCode.value+=t),e&&(this.cssEditorCode.value+=e),i&&(this.jsEditorCode.value+=i),this.render()}},{key:"createEditor",value:function(t){var e=document.createElement("div");e.id=t,e.className+="editor",this.editorsDiv.appendChild(e);var i=document.createElement("h3");i.textContent=t.toUpperCase(),e.appendChild(i);var s=document.createElement("textarea");s.addEventListener("focus",function(){this.style.outline="none"}),e.appendChild(s)}},{key:"createTopBar",value:function(t){this.topBar=document.createElement("div"),this.topBar.id="topBar",this.topBar.className="topbar",this.codeground.appendChild(this.topBar);var e=document.createElement("h2");e.textContent=t,this.topBar.appendChild(e)}},{key:"createTabBtn",value:function(t){var e=document.createElement("button");e.id=t.toLowerCase()+"Btn",e.textContent=t,e.style.height="50px",e.style.width="70px",e.style.background="none",e.style.border="none",e.style.borderRight="1px solid #d6d6d6",e.style.outline="none",e.style.color="#777272",e.style.fontSize="12px",e.addEventListener("mouseenter",function(){e.style.background="242121",e.style.color="black",e.style.cursor="pointer"}),e.addEventListener("mouseleave",function(){e.style.background="none",e.style.color="#777272"});var i=document.getElementById("topBar");i.appendChild(e)}},{key:"tabs",value:function(t){"html"===t?"block"==this.htmlEditor.style.display?(this.htmlEditor.style.display="none",this.fullWidth("output")):"none"==this.editorsDiv.style.display?(this.htmlEditor.style.display="block",this.editorsDiv.style.display="block",this.halfWidth()):(this.htmlEditor.style.display="block",this.htmlEditor.style.height="100%",this.cssEditor.style.display="none",this.jsEditor.style.display="none"):"css"===t?"block"==this.cssEditor.style.display?(this.cssEditor.style.display="none",this.fullWidth("output")):"none"==this.editorsDiv.style.display?(this.cssEditor.style.display="block",this.editorsDiv.style.display="block",this.halfWidth()):(this.htmlEditor.style.display="none",this.cssEditor.style.display="block",this.cssEditor.style.height="100%",this.jsEditor.style.display="none"):"js"===t?"block"==this.jsEditor.style.display?(this.jsEditor.style.display="none",this.fullWidth("output")):"none"==this.editorsDiv.style.display?(this.jsEditor.style.display="block",this.editorsDiv.style.display="block",this.halfWidth()):(this.htmlEditor.style.display="none",this.cssEditor.style.display="none",this.jsEditor.style.display="block",this.jsEditor.style.height="100%"):"result"===t&&("block"==this.outputDiv.style.display&&"none"==this.editorsDiv.style.display?(this.fullWidth(),this.options.html?this.tabs("html"):this.options.css?this.tabs("css"):this.tabs("js")):"block"==this.outputDiv.style.display?this.fullWidth():(this.outputDiv.style.display="block",this.halfWidth()))}},{key:"fullWidth",value:function(t){this.editorsDiv.style.display="block",this.outputDiv.style.display="block",this.editorsDiv.style.height=this.editorHeight+"px",this.editorsDiv.style.width="100%",this.outputDiv.style.height=this.editorHeight+"px",this.outputDiv.style.width="100%","output"===t?this.editorsDiv.style.display="none":this.outputDiv.style.display="none"}},{key:"halfWidth",value:function(){this.editorsDiv.style.display="block",this.outputDiv.style.display="block",this.editorsDiv.style.height=this.editorHeight+"px",this.editorsDiv.style.width="49.9%",this.editorsDiv.style.float="left",this.outputDiv.style.height=this.editorHeight+"px",this.outputDiv.style.width="50%",this.outputDiv.style.borderLeft="1px solid #eee",this.outputDiv.style.float="left"}},{key:"keyupRender",value:function(t){var e=this;t.addEventListener("keyup",function(){return e.render()})}},{key:"render",value:function(){var t=this.prepareSource(),e=document.querySelector(".output iframe"),i=e.contentDocument;i.open(),i.write(t),i.close()}},{key:"prepareSource",value:function(){var t=this.htmlEditorCode.value,e=this.cssEditorCode.value,i=this.jsEditorCode.value,s="",o="<!doctype html>\n<html>\n\t<head>\n\t\t<meta charset='utf-8'>\n\t\t<title>Test</title>\n\n\t\t\n\t</head>\n\t<body>\n\t\n\t</body>\n</html>";return s=o.replace("</body>",t+"</body>"),e="<style>"+e+"</style>",s=s.replace("</head>",e+"</head>"),i="<script>"+i+"</script>",s=s.replace("</body>",i+"</body>")}}]),t}();